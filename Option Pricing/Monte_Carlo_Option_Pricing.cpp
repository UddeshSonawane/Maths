/*
MONTE CARLO SIMULATOIN FOR OPTION PRICING

*/

#include<iostream>
#include<cstdlib>
#include<cmath>
using namespace std;

float max(float a, float b)
{
	if(a>b)
		return a;
	else
		return b;
}

int main()
{
	float spot_price, exercise_price;
	float ex_period;
	float rate, volatality;
	
	spot_price=500;
	exercise_price=530;
	ex_period=1;
	rate=0.025;
	volatality=0.2;
	
	/*cout<<"\nPlease enter following details";
	cout<<"\nEnter spot price : ";
	cin>>spot_price;
	cout<<"\nEnter exercise price (or strike price) : ";
	cin>>exercise_price;
	cout<<"\nEnter expiration period : ";
	cin>>ex_period;
	cout<<"\nEnter annual rate : ";
	float temp;
	cin>>temp;
	rate=temp/100;
	cout<<"\nEnter volatality (% with which spot price increase or decrease) : ";
	cin>>temp;
	volatality=temp/100;*/
	
	int n=500;  //number of iterations
	
	float itr[n];
	for(int i=0;i<n;i++)
	{
		itr[i]=((float)rand()/(RAND_MAX));
	}
	
	float temp_call, temp_put, temp_payoff;
	temp_call=0;
	temp_put=0;
	cout<<"\nStock P\t\tCall V\t\tPut V";
	for(int i=0;i<n;i++)
	{
		temp_payoff=spot_price*exp((rate-0.5*(volatality*volatality))*ex_period + volatality*sqrt(ex_period)*itr[i]);
		temp_call=temp_call+max(0,temp_payoff-exercise_price);
		temp_put=temp_put+max(0,exercise_price-temp_payoff);
		
		cout<<"\n"<<temp_payoff<<"\t\t"<<max(0,temp_payoff-exercise_price)<<"\t\t"<<max(0,exercise_price-temp_payoff);
	}
	
	cout<<"\nCall option : "<<temp_call/n;
	cout<<"\nPut Option : "<<temp_put/n;
		
return 0;
}

/*
output (checked for 500 iterations)

Stock P		Call V		Put V
594.455		64.4554		0
543.747		13.7473		0
587.707		57.7067		0
589.513		59.5126		0
603.012		73.0123		0
522.758		0		7.24213
537.352		7.35162		0
585.961		55.9615		0
531.213		1.21301		0
561.382		31.3823		0
552.85		22.8505		0
569.855		39.8552		0
540.538		10.538		0
556.846		26.8458		0
607.927		77.9265		0
603.561		73.561		0
570.635		40.6354		0
580.023		50.0228		0
516.941		0		13.0591
567.364		37.3644		0
504.147		0		25.8528
527.519		0		2.48071
516.489		0		13.5108
590.189		60.1894		0
518.502		0		11.498
544.461		14.4614		0
515.721		0		14.2789
513.562		0		16.4385
613.631		83.6306		0
524.927		0		5.07288
556.794		26.7936		0
594.328		64.3275		0
568.008		38.0083		0
533.156		3.15619		0
570.845		40.8455		0
558.059		28.0594		0
554.643		24.643		0
610.43		80.4297		0
532.782		2.78156		0
586.328		56.3282		0
558.334		28.3339		0
586.159		56.1589		0
544.383		14.3834		0
600.591		70.5909		0
531.802		1.80188		0
539.207		9.20709		0
590.608		60.6083		0
603.903		73.9029		0
509.566		0		20.4341
607.574		77.5737		0
558.25		28.2502		0
511.23		0		18.7702
522.2		0		7.79987
573.784		43.7842		0
600.435		70.4351		0
538.823		8.82275		0
508.997		0		21.0029
504.523		0		25.4774
550.677		20.677		0
508.888		0		21.1123
527.034		0		2.96649
610.168		80.1683		0
601.875		71.8749		0
595.733		65.7327		0
530.034		0.0340576		0
559.789		29.7891		0
541.666		11.666		0
585.027		55.0269		0
556.749		26.7494		0
574.301		44.3005		0
558.877		28.877		0
506.47		0		23.5305
548.472		18.4717		0
605.452		75.4519		0
605.328		75.3278		0
580.447		50.447		0
531.906		1.90601		0
582.492		52.4917		0
571.123		41.1226		0
539.379		9.37866		0
576.618		46.6182		0
519.467		0		10.5332
548.742		18.7423		0
599.217		69.2166		0
593.151		63.1506		0
536.827		6.82678		0
526.053		0		3.94714
600.812		70.8123		0
538.981		8.9809		0
576.481		46.4808		0
608.442		78.4421		0
565.288		35.2885		0
573.105		43.105		0
596.658		66.6576		0
548.683		18.6826		0
604.5		74.5002		0
544.188		14.1884		0
591.441		61.4407		0
576.198		46.1982		0
602.931		72.9308		0
553.414		23.4139		0
524.672		0		5.32812
607.686		77.6862		0
604.036		74.0359		0
517.568		0		12.4324
599.335		69.3349		0
571.248		41.2485		0
547.849		17.8485		0
568.799		38.7991		0
531.562		1.56207		0
588.048		58.048		0
534.376		4.37598		0
549.503		19.5033		0
525.752		0		4.24811
521.711		0		8.28851
531.049		1.04938		0
561.66		31.6601		0
546.158		16.158		0
519.844		0		10.1556
602.428		72.4284		0
512.983		0		17.0172
515.338		0		14.6619
554.849		24.8495		0
585.053		55.0534		0
611.894		81.8936		0
605.836		75.8358		0
576.224		46.2244		0
542.531		12.5313		0
583.802		53.8022		0
540.958		10.9575		0
532.957		2.95667		0
526.399		0		3.60052
564.819		34.8193		0
527.68		0		2.3197
518.057		0		11.9426
581.748		51.7482		0
515.276		0		14.7238
588.927		58.9269		0
519.272		0		10.7277
583.254		53.2538		0
510.053		0		19.9473
607.668		77.6682		0
507.813		0		22.1866
557.756		27.7556		0
520.531		0		9.46857
527.221		0		2.77863
589.437		59.4369		0
581.807		51.8071		0
573.02		43.0201		0
609.774		79.7744		0
571.063		41.0631		0
584.967		54.9668		0
511.99		0		18.0105
516.249		0		13.7513
557.605		27.6046		0
510.431		0		19.5695
509.581		0		20.4187
523.501		0		6.4989
551.087		21.0867		0
592.022		62.0219		0
563.559		33.5589		0
584.481		54.481		0
507.753		0		22.2466
518.619		0		11.381
613.762		83.7617		0
523.467		0		6.53308
600.402		70.4019		0
515.276		0		14.7245
613.492		83.4924		0
507.969		0		22.0314
598.075		68.075		0
509.828		0		20.1718
502.925		0		27.0753
604.391		74.3914		0
565.883		35.8826		0
520.965		0		9.03516
519.172		0		10.8284
543.455		13.4546		0
603.179		73.1786		0
592.024		62.024		0
539.923		9.92334		0
561.216		31.2156		0
564.248		34.2481		0
550.113		20.1127		0
576.564		46.5635		0
512.621		0		17.3793
558.788		28.7877		0
584.681		54.6813		0
534.038		4.03809		0
612.809		82.8093		0
563.971		33.9707		0
598.922		68.9217		0
583.573		53.5732		0
569.86		39.8596		0
506.079		0		23.9213
583.573		53.5725		0
593.63		63.6298		0
604.67		74.6703		0
598.402		68.4017		0
593.368		63.3685		0
611.243		81.2432		0
583.107		53.1068		0
602.014		72.0144		0
611.752		81.7522		0
574.204		44.2037		0
555.051		25.0509		0
519.258		0		10.7416
593.247		63.2468		0
600.281		70.281		0
510.304		0		19.6958
572.235		42.2349		0
528.064		0		1.93628
569.925		39.9246		0
526.071		0		3.92938
578.091		48.0914		0
535.383		5.38257		0
536.659		6.65936		0
526.312		0		3.68829
510.015		0		19.9849
570.334		40.3342		0
525.494		0		4.50568
572.398		42.3979		0
556.543		26.5435		0
610.27		80.2698		0
531.454		1.45392		0
560.5		30.5001		0
580.252		50.2516		0
514.021		0		15.9789
552.197		22.197		0
565.729		35.7295		0
606.965		76.9653		0
549.93		19.9304		0
537.473		7.4729		0
595.347		65.3474		0
548.129		18.129		0
502.831		0		27.1689
538.397		8.39728		0
566.402		36.4022		0
593.63		63.6303		0
526.571		0		3.42883
575.192		45.1917		0
553.465		23.4648		0
553.353		23.3525		0
534.109		4.10864		0
579.419		49.4188		0
521.192		0		8.80762
569.052		39.0525		0
506.63		0		23.37
545.883		15.8831		0
577.556		47.5557		0
575.015		45.0146		0
570.856		40.8555		0
538.631		8.63129		0
521.408		0		8.59216
567.607		37.607		0
569.66		39.66		0
581.583		51.5831		0
536.616		6.61615		0
582.714		52.7136		0
523.245		0		6.75458
604.131		74.1309		0
576.26		46.2603		0
572.627		42.6268		0
529.039		0		0.961487
558.97		28.9703		0
511.392		0		18.6078
529.38		0		0.619507
598.894		68.8942		0
576.418		46.418		0
512.016		0		17.9839
513.815		0		16.1851
540.194		10.194		0
563.939		33.9391		0
565.805		35.8055		0
574.167		44.1665		0
532.383		2.38324		0
586.845		56.8455		0
532.341		2.34082		0
536.752		6.7522		0
521.943		0		8.05707
611.846		81.8461		0
502.866		0		27.134
592.936		62.9359		0
536.949		6.9494		0
521.781		0		8.21881
548.347		18.3466		0
608.706		78.7061		0
603.891		73.8913		0
585.568		55.5681		0
577.913		47.9129		0
514.83		0		15.17
576.379		46.3789		0
542.601		12.6011		0
586.67		56.6702		0
606.812		76.8116		0
603.57		73.5704		0
597.044		67.0444		0
523.385		0		6.61481
588.949		58.9489		0
560.717		30.7171		0
533.29		3.29022		0
602.203		72.203		0
602.771		72.7706		0
598.486		68.4865		0
555.149		25.1492		0
563.884		33.8837		0
519.133		0		10.8674
530.803		0.802673		0
597.362		67.3624		0
554.512		24.5117		0
551.334		21.3339		0
595.497		65.4971		0
554.909		24.9087		0
532.626		2.62561		0
520.97		0		9.03009
576.194		46.1937		0
581.214		51.2135		0
516.678		0		13.3221
566.927		36.9266		0
554.514		24.5142		0
594.211		64.2112		0
580.83		50.8302		0
520.739		0		9.26068
525.317		0		4.68335
555.192		25.1915		0
514.842		0		15.1581
516.593		0		13.4067
540.069		10.0688		0
536.233		6.2334		0
605.459		75.4592		0
602.631		72.631		0
569.083		39.0835		0
594.056		64.056		0
591.838		61.8384		0
554.919		24.9194		0
537.325		7.32465		0
543.741		13.7413		0
573.28		43.28		0
567.582		37.5817		0
529.212		0		0.787903
517.937		0		12.0627
509.85		0		20.1497
513.463		0		16.5371
571.949		41.9489		0
540.41		10.4098		0
532.329		2.32916		0
536.939		6.93939		0
511.751		0		18.2492
547.342		17.3419		0
605.774		75.774		0
564.716		34.7156		0
529.906		0		0.0936279
573.27		43.2703		0
585.206		55.2059		0
553.961		23.9606		0
518.564		0		11.4365
599.572		69.5716		0
569.49		39.49		0
557.326		27.3264		0
523.835		0		6.16498
561.786		31.7856		0
547.218		17.2184		0
593.238		63.2382		0
543.748		13.7479		0
527.671		0		2.32874
536.363		6.36279		0
581.424		51.4239		0
570.971		40.9713		0
611.905		81.905		0
537.676		7.67627		0
601.316		71.3157		0
516.37		0		13.6303
545.534		15.5343		0
503.05		0		26.9499
587.728		57.7281		0
586.683		56.6834		0
532.905		2.90527		0
514.164		0		15.8363
597.477		67.4766		0
580.453		50.4532		0
507.472		0		22.5285
549.731		19.731		0
612.104		82.1036		0
578.935		48.9348		0
524.154		0		5.84644
552.463		22.4633		0
597.434		67.4343		0
512.034		0		17.9655
512.612		0		17.3876
542.5		12.4996		0
533.768		3.7677		0
573.084		43.0839		0
590.77		60.7703		0
515.918		0		14.0817
507.71		0		22.2903
507.904		0		22.0959
550.679		20.6785		0
587.445		57.4445		0
577.104		47.1045		0
549.012		19.0119		0
514.621		0		15.3792
565.401		35.4011		0
564.158		34.1584		0
558.686		28.6862		0
566.013		36.0131		0
540.228		10.2281		0
534.037		4.03705		0
600.254		70.2539		0
552.761		22.7606		0
519.867		0		10.1334
567.678		37.6777		0
558.222		28.2224		0
568.723		38.7228		0
566.143		36.1434		0
526.546		0		3.45367
593.223		63.2227		0
509.6		0		20.4
512.538		0		17.4616
604.471		74.471		0
519.849		0		10.1512
553.33		23.3301		0
525.687		0		4.31287
592.862		62.8622		0
532.602		2.60168		0
539.718		9.71796		0
599.001		69.0012		0
538.323		8.32275		0
591.458		61.4575		0
573.316		43.3162		0
506.171		0		23.8295
529.06		0		0.940002
587.138		57.1378		0
569.524		39.524		0
593.97		63.97		0
534.451		4.45068		0
525.216		0		4.78381
522.807		0		7.19305
567.986		37.9858		0
513.656		0		16.3436
575.091		45.0915		0
587.608		57.6083		0
580.274		50.274		0
523.051		0		6.94922
544.488		14.4879		0
535.253		5.25311		0
548.074		18.0737		0
526.266		0		3.73376
542.809		12.8091		0
559.016		29.0156		0
518.299		0		11.7007
561.543		31.5426		0
503.974		0		26.0264
542.209		12.2087		0
542.42		12.4205		0
534.157		4.15692		0
582.36		52.3605		0
529.375		0		0.625
572.229		42.2294		0
561.197		31.1967		0
603.971		73.9711		0
576.402		46.402		0
590.852		60.8517		0
577.771		47.7711		0
534.856		4.85632		0
571.798		41.7981		0
503.11		0		26.8899
559.028		29.0283		0
594.898		64.898		0
568.668		38.6684		0
571.433		41.4326		0
557.416		27.4156		0
544.436		14.4357		0
540.254		10.2538		0
580.205		50.205		0
589.92		59.9203		0
575.461		45.4605		0
518.108		0		11.8922
505.823		0		24.1771
508.935		0		21.065
576.372		46.3715		0
521.72		0		8.27985
568.727		38.7266		0
578.055		48.0546		0
562.941		32.9407		0
502.619		0		27.3806
503.08		0		26.9196
534.139		4.13885		0
529.494		0		0.505798
572.883		42.8831		0
596.524		66.5238		0
521.047		0		8.95294
538.011		8.01099		0
574.257		44.2565		0
599.089		69.0889		0
572.647		42.6468		0
534.993		4.99316		0
599.809		69.8088		0
521.579		0		8.42084
518.55		0		11.4503
555.74		25.7399		0
Call option : 30.2895
Put Option : 3.3561

*/
